<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>My Drawing app</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<style media="screen">
  body {
    margin-left: 37px;
  }
</style>

  </head>
  <body>
    <h1>GI Chat</h1>
    <p>

    </p>
    <textarea class="form" type="text-area" name="name" value="" style="width:700px;height: 37px"></textarea><br /><br />
    <button class="btn btn-info" type="button" name="button">SEND</button>
  </body>
  <script>
      var socket = io();
      var form = $('.form');
      submit ()

      $(".form").on('keypress', function(event) {
          if (event.which == 13) {
              event.preventDefault();
              submit();
          }
      });


////////Refactoring click event//////
      function submit (){
        $('button').on('click', function(){
          $('p').append(`<div class="well text-center" style="width:700px">${form.val()}</div><br />`)
          socket.emit('chat message', form.val());
          form.val('');
        })
      }

      socket.on('finish', function(phrase){
        $('p').append(`<div class="well text-center" style="width:700px">${phrase}</div><br />`)
      });
  </script>
</html>
